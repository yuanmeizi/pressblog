(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{497:function(n,s,a){"use strict";a.r(s);var r=a(4),e=Object(r.a)({},(function(){var n=this,s=n.$createElement,a=n._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[a("h1",{attrs:{id:"beego框架里controller层的一些常用封装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#beego框架里controller层的一些常用封装"}},[n._v("#")]),n._v(" beego框架里controller层的一些常用封装")]),n._v(" "),a("p",[n._v("(其实没软用)")]),n._v(" "),a("h2",{attrs:{id:"beego框架里controller层的一些常用封装-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#beego框架里controller层的一些常用封装-2"}},[n._v("#")]),n._v(" beego框架里controller层的一些常用封装")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('package controllers\n\nimport (\n    "../models"\n    "crypto/md5"\n    "encoding/json"\n    "fmt"\n    "github.com/astaxie/beego"\n    "io/ioutil"\n    "log"\n    "net"\n    "os"\n    "path/filepath"\n    "strconv"\n    "strings"\n    "time"\n)\n\ntype wycontroller struct {\n    beego.Controller\n}\n\n//获得返回结果的JSON字符串\ntype st_json_normal_data struct {\n    Status int         `json:"status"`\n    Msg    string      `json:"msg"`\n    Data   interface{} `json:"datalist"`\n}\n\nvar (\n    ImgExt = []string{"jpg", "gif", "png", "jpeg", "bmp", ""}\n)\n\n//获得当前时间\nfunc (this *ywcontroller) GetDateTime() string {\n    return time.Now().Format("2006-01-02 15:04:05")\n}\n\n// 转换时间字符串格式\n// 时间格式：2006-01-02 15:04:05\n// timestr: 需要转换的日期\n// oldFormat： 转换前的格式\n// newFormat： 转换后的格式\nfunc (this *ywcontroller) FormateDateStr(timestr string, oldFormat string, newFormat string) (string, error) {\n    formatTime, err := time.Parse(oldFormat, timestr)\n    return formatTime.Format(newFormat), err\n}\n\n//获得传入的参数，转换为int\nfunc (this *ywcontroller) GetParamAsInt(key string) int {\n    num, err := strconv.Atoi(this.GetString(key))\n    if err != nil {\n        return 0\n    }\n    return num\n}\n\n//获得当前传入的string参数\nfunc (this *ywcontroller) GetParamAsString(key string) string {\n    return this.GetString(key)\n}\n\n//获得当前传入的参数，防止sql注入，替换一些字符\nfunc (this *ywcontroller) GetParamAsSqlString(key string) string {\n    val := strings.Replace(this.GetString(key), "\'", "\'\'", -1)\n    return val\n}\n\n/*\n返回json字符串\n输入 status 返回状态, msg 返回信息, data 数据\n输出 转换成json字符串 {Status: status, Msg: msg, Data: ""}\n*/\nfunc (this *ywcontroller) jsonString(status int, msg string, data interface{}) string {\n    s := &st_json_normal_data{Status: status, Msg: msg}\n    if data == nil {\n        s.Data = ""\n    } else {\n        s.Data = data\n    }\n    bt, _ := json.Marshal(s)\n    return string(bt)\n}\n\n/*\n输出一个对象\n*/\nfunc (this *ywcontroller) ReturnJsonString(status int, msg string, data interface{}) {\n    this.Ctx.WriteString(this.jsonString(status, msg, data))\n}\n\n//判断是不是数\nfunc (this *ywcontroller) Is_Number(num string) bool {\n    if _, err := strconv.Atoi(num); err != nil {\n        return false\n    }\n    return true\n}\n\n//转换为数字\nfunc (this *ywcontroller) toInt(val interface{}) int {\n    num, err := strconv.Atoi(fmt.Sprint(val))\n    if err != nil {\n        return 0\n    }\n    return num\n}\n\n//获取系统路径\nfunc (this *ywcontroller) GetExePath() string {\n    exePath := filepath.Dir(os.Args[0])\n    if !filepath.IsAbs(exePath) {\n        exePath, _ = filepath.Abs(exePath)\n    }\n    return exePath\n}\n\n/*\n输出一个对象\n*/\nfunc (this *ywcontroller) ReturnString(args ...interface{}) {\n    //任意数据类型转成string\n    this.Ctx.WriteString(fmt.Sprint(args...))\n}\n\nfunc (this *ywcontroller) SetUserSession(data map[string]string) {\n    for k, v := range data {\n        this.SetSession(k, v)\n    }\n}\n\n//从session中获取某一个信息\nfunc (this *ywcontroller) GetUserSession(key string) (string, bool) {\n    data, ok := this.Ctx.Input.Session(key).(string)\n    if !ok {\n        return "", false\n    }\n    return data, true\n}\n\n//删除所有session\nfunc (this *ywcontroller) DelUserSession() {\n    this.DelSession("id")\n    this.DelSession("shopid")\n    this.DelSession("name")\n    // 把要删的session全放在这里删掉\n\n}\n\n//MD5值\nfunc (this *ywcontroller) md5Value(s string) string {\n    h := md5.New()\n    h.Write([]byte(s))\n    return fmt.Sprintf("%x", h.Sum(nil))\n}\n\n//sws的变种MD5\nfunc (this *ywcontroller) SWSMD5(str string) string {\n    str = this.md5Value(str)\n    if len(str) > 8 {\n        str = str[:3] + "a" + str[3:]\n        str = str[:5] + "z" + str[5:]\n    }\n    return str\n}\n\n//判断是不是图片后缀,是返回false,不是返回true\nfunc (this *ywcontroller) IsImgExt(ext string) bool {\n\n    for _, oneimg := range ImgExt {\n        if strings.ToLower(ext) == oneimg {\n            return false\n        }\n    }\n    return true\n}\n\n//上传一张照片,返回照片路径\nfunc (this *ywcontroller) UploadOneImg() {\n    files := this.GetParamAsSqlString("file")\n    file, fileheader, err := this.GetFile(files)\n    if err != nil {\n        this.ReturnString(this.jsonString(0, err.Error(), ""))\n        return\n    }\n    defer func() {\n        if file != nil {\n            file.Close()\n        }\n    }()\n    if fileheader.Size > 2000*1024 {\n        this.ReturnJsonString(0, "图片大小不得超过2mb", "")\n        return\n    }\n    filename := filepath.Base(fileheader.Filename)\n    index := strings.LastIndex(filename, ".")\n    ext := filename[index+1:]\n    if this.IsImgExt(ext) {\n        this.ReturnString(this.jsonString(0, "仅可上传jpg、gif、png文件", ""))\n        return\n    }\n    //把文件保存到临时目录\n    b, err := ioutil.ReadAll(file)\n    if err != nil {\n        log.Println(err)\n        this.ReturnString(this.jsonString(0, "上传文件失败", ""))\n        return\n    }\n    filepath := "./imgfile/" + fmt.Sprintf("%d.%s", time.Now().UnixNano(), ext)\n    ioutil.WriteFile(filepath, b, 0x644)\n    this.ReturnString(this.jsonString(1, "导入成功", strings.TrimLeft(filepath, ".")))\n}\n\n//判断文件夹是否存在\nfunc isDirExists(path string) bool {\n    fi, err := os.Stat(path)\n    if err != nil {\n        return os.IsExist(err)\n    }\n    return fi.IsDir()\n}\n\n//创建文件夹\nfunc CreatePath(path string) {\n    if isDirExists(path) {\n        return\n    }\n    err := os.Mkdir(path, 0x644)\n    if err != nil {\n        log.Println(err)\n    }\n}\n\n//判断是不是移动端访问 移动端访问返回true 非移动端访问返回false\nfunc (this *ywcontroller) ismobile() bool {\n    keywords := []string{"Android", "iPhone", "iPod", "iPad", "Windows Phone", "MQQBrowser"}\n    for i := 0; i < len(keywords); i++ {\n        if strings.Contains(this.Ctx.Request.UserAgent(), keywords[i]) {\n            return true\n        }\n    }\n    return false\n}\n\n/*\n获取远程用户IP地址\n输入 无\n输出 IP地址\n*/\nfunc (this *ywcontroller) GetRemoteAddr() (string, string) {\n    remote_addr := this.Ctx.Request.RemoteAddr\n    if npos := strings.LastIndex(remote_addr, ":"); npos != -1 {\n        return remote_addr[:npos], remote_addr[npos+1:]\n    }\n    return remote_addr, "0"\n}\n\n//判断IP是不是IPV4的IP地址\nfunc (this *ywcontroller) IsIPV4(ip string) bool {\n    return net.ParseIP(ip) != nil && net.ParseIP(ip).DefaultMask() != nil\n}\n\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br"),a("span",{staticClass:"line-number"},[n._v("26")]),a("br"),a("span",{staticClass:"line-number"},[n._v("27")]),a("br"),a("span",{staticClass:"line-number"},[n._v("28")]),a("br"),a("span",{staticClass:"line-number"},[n._v("29")]),a("br"),a("span",{staticClass:"line-number"},[n._v("30")]),a("br"),a("span",{staticClass:"line-number"},[n._v("31")]),a("br"),a("span",{staticClass:"line-number"},[n._v("32")]),a("br"),a("span",{staticClass:"line-number"},[n._v("33")]),a("br"),a("span",{staticClass:"line-number"},[n._v("34")]),a("br"),a("span",{staticClass:"line-number"},[n._v("35")]),a("br"),a("span",{staticClass:"line-number"},[n._v("36")]),a("br"),a("span",{staticClass:"line-number"},[n._v("37")]),a("br"),a("span",{staticClass:"line-number"},[n._v("38")]),a("br"),a("span",{staticClass:"line-number"},[n._v("39")]),a("br"),a("span",{staticClass:"line-number"},[n._v("40")]),a("br"),a("span",{staticClass:"line-number"},[n._v("41")]),a("br"),a("span",{staticClass:"line-number"},[n._v("42")]),a("br"),a("span",{staticClass:"line-number"},[n._v("43")]),a("br"),a("span",{staticClass:"line-number"},[n._v("44")]),a("br"),a("span",{staticClass:"line-number"},[n._v("45")]),a("br"),a("span",{staticClass:"line-number"},[n._v("46")]),a("br"),a("span",{staticClass:"line-number"},[n._v("47")]),a("br"),a("span",{staticClass:"line-number"},[n._v("48")]),a("br"),a("span",{staticClass:"line-number"},[n._v("49")]),a("br"),a("span",{staticClass:"line-number"},[n._v("50")]),a("br"),a("span",{staticClass:"line-number"},[n._v("51")]),a("br"),a("span",{staticClass:"line-number"},[n._v("52")]),a("br"),a("span",{staticClass:"line-number"},[n._v("53")]),a("br"),a("span",{staticClass:"line-number"},[n._v("54")]),a("br"),a("span",{staticClass:"line-number"},[n._v("55")]),a("br"),a("span",{staticClass:"line-number"},[n._v("56")]),a("br"),a("span",{staticClass:"line-number"},[n._v("57")]),a("br"),a("span",{staticClass:"line-number"},[n._v("58")]),a("br"),a("span",{staticClass:"line-number"},[n._v("59")]),a("br"),a("span",{staticClass:"line-number"},[n._v("60")]),a("br"),a("span",{staticClass:"line-number"},[n._v("61")]),a("br"),a("span",{staticClass:"line-number"},[n._v("62")]),a("br"),a("span",{staticClass:"line-number"},[n._v("63")]),a("br"),a("span",{staticClass:"line-number"},[n._v("64")]),a("br"),a("span",{staticClass:"line-number"},[n._v("65")]),a("br"),a("span",{staticClass:"line-number"},[n._v("66")]),a("br"),a("span",{staticClass:"line-number"},[n._v("67")]),a("br"),a("span",{staticClass:"line-number"},[n._v("68")]),a("br"),a("span",{staticClass:"line-number"},[n._v("69")]),a("br"),a("span",{staticClass:"line-number"},[n._v("70")]),a("br"),a("span",{staticClass:"line-number"},[n._v("71")]),a("br"),a("span",{staticClass:"line-number"},[n._v("72")]),a("br"),a("span",{staticClass:"line-number"},[n._v("73")]),a("br"),a("span",{staticClass:"line-number"},[n._v("74")]),a("br"),a("span",{staticClass:"line-number"},[n._v("75")]),a("br"),a("span",{staticClass:"line-number"},[n._v("76")]),a("br"),a("span",{staticClass:"line-number"},[n._v("77")]),a("br"),a("span",{staticClass:"line-number"},[n._v("78")]),a("br"),a("span",{staticClass:"line-number"},[n._v("79")]),a("br"),a("span",{staticClass:"line-number"},[n._v("80")]),a("br"),a("span",{staticClass:"line-number"},[n._v("81")]),a("br"),a("span",{staticClass:"line-number"},[n._v("82")]),a("br"),a("span",{staticClass:"line-number"},[n._v("83")]),a("br"),a("span",{staticClass:"line-number"},[n._v("84")]),a("br"),a("span",{staticClass:"line-number"},[n._v("85")]),a("br"),a("span",{staticClass:"line-number"},[n._v("86")]),a("br"),a("span",{staticClass:"line-number"},[n._v("87")]),a("br"),a("span",{staticClass:"line-number"},[n._v("88")]),a("br"),a("span",{staticClass:"line-number"},[n._v("89")]),a("br"),a("span",{staticClass:"line-number"},[n._v("90")]),a("br"),a("span",{staticClass:"line-number"},[n._v("91")]),a("br"),a("span",{staticClass:"line-number"},[n._v("92")]),a("br"),a("span",{staticClass:"line-number"},[n._v("93")]),a("br"),a("span",{staticClass:"line-number"},[n._v("94")]),a("br"),a("span",{staticClass:"line-number"},[n._v("95")]),a("br"),a("span",{staticClass:"line-number"},[n._v("96")]),a("br"),a("span",{staticClass:"line-number"},[n._v("97")]),a("br"),a("span",{staticClass:"line-number"},[n._v("98")]),a("br"),a("span",{staticClass:"line-number"},[n._v("99")]),a("br"),a("span",{staticClass:"line-number"},[n._v("100")]),a("br"),a("span",{staticClass:"line-number"},[n._v("101")]),a("br"),a("span",{staticClass:"line-number"},[n._v("102")]),a("br"),a("span",{staticClass:"line-number"},[n._v("103")]),a("br"),a("span",{staticClass:"line-number"},[n._v("104")]),a("br"),a("span",{staticClass:"line-number"},[n._v("105")]),a("br"),a("span",{staticClass:"line-number"},[n._v("106")]),a("br"),a("span",{staticClass:"line-number"},[n._v("107")]),a("br"),a("span",{staticClass:"line-number"},[n._v("108")]),a("br"),a("span",{staticClass:"line-number"},[n._v("109")]),a("br"),a("span",{staticClass:"line-number"},[n._v("110")]),a("br"),a("span",{staticClass:"line-number"},[n._v("111")]),a("br"),a("span",{staticClass:"line-number"},[n._v("112")]),a("br"),a("span",{staticClass:"line-number"},[n._v("113")]),a("br"),a("span",{staticClass:"line-number"},[n._v("114")]),a("br"),a("span",{staticClass:"line-number"},[n._v("115")]),a("br"),a("span",{staticClass:"line-number"},[n._v("116")]),a("br"),a("span",{staticClass:"line-number"},[n._v("117")]),a("br"),a("span",{staticClass:"line-number"},[n._v("118")]),a("br"),a("span",{staticClass:"line-number"},[n._v("119")]),a("br"),a("span",{staticClass:"line-number"},[n._v("120")]),a("br"),a("span",{staticClass:"line-number"},[n._v("121")]),a("br"),a("span",{staticClass:"line-number"},[n._v("122")]),a("br"),a("span",{staticClass:"line-number"},[n._v("123")]),a("br"),a("span",{staticClass:"line-number"},[n._v("124")]),a("br"),a("span",{staticClass:"line-number"},[n._v("125")]),a("br"),a("span",{staticClass:"line-number"},[n._v("126")]),a("br"),a("span",{staticClass:"line-number"},[n._v("127")]),a("br"),a("span",{staticClass:"line-number"},[n._v("128")]),a("br"),a("span",{staticClass:"line-number"},[n._v("129")]),a("br"),a("span",{staticClass:"line-number"},[n._v("130")]),a("br"),a("span",{staticClass:"line-number"},[n._v("131")]),a("br"),a("span",{staticClass:"line-number"},[n._v("132")]),a("br"),a("span",{staticClass:"line-number"},[n._v("133")]),a("br"),a("span",{staticClass:"line-number"},[n._v("134")]),a("br"),a("span",{staticClass:"line-number"},[n._v("135")]),a("br"),a("span",{staticClass:"line-number"},[n._v("136")]),a("br"),a("span",{staticClass:"line-number"},[n._v("137")]),a("br"),a("span",{staticClass:"line-number"},[n._v("138")]),a("br"),a("span",{staticClass:"line-number"},[n._v("139")]),a("br"),a("span",{staticClass:"line-number"},[n._v("140")]),a("br"),a("span",{staticClass:"line-number"},[n._v("141")]),a("br"),a("span",{staticClass:"line-number"},[n._v("142")]),a("br"),a("span",{staticClass:"line-number"},[n._v("143")]),a("br"),a("span",{staticClass:"line-number"},[n._v("144")]),a("br"),a("span",{staticClass:"line-number"},[n._v("145")]),a("br"),a("span",{staticClass:"line-number"},[n._v("146")]),a("br"),a("span",{staticClass:"line-number"},[n._v("147")]),a("br"),a("span",{staticClass:"line-number"},[n._v("148")]),a("br"),a("span",{staticClass:"line-number"},[n._v("149")]),a("br"),a("span",{staticClass:"line-number"},[n._v("150")]),a("br"),a("span",{staticClass:"line-number"},[n._v("151")]),a("br"),a("span",{staticClass:"line-number"},[n._v("152")]),a("br"),a("span",{staticClass:"line-number"},[n._v("153")]),a("br"),a("span",{staticClass:"line-number"},[n._v("154")]),a("br"),a("span",{staticClass:"line-number"},[n._v("155")]),a("br"),a("span",{staticClass:"line-number"},[n._v("156")]),a("br"),a("span",{staticClass:"line-number"},[n._v("157")]),a("br"),a("span",{staticClass:"line-number"},[n._v("158")]),a("br"),a("span",{staticClass:"line-number"},[n._v("159")]),a("br"),a("span",{staticClass:"line-number"},[n._v("160")]),a("br"),a("span",{staticClass:"line-number"},[n._v("161")]),a("br"),a("span",{staticClass:"line-number"},[n._v("162")]),a("br"),a("span",{staticClass:"line-number"},[n._v("163")]),a("br"),a("span",{staticClass:"line-number"},[n._v("164")]),a("br"),a("span",{staticClass:"line-number"},[n._v("165")]),a("br"),a("span",{staticClass:"line-number"},[n._v("166")]),a("br"),a("span",{staticClass:"line-number"},[n._v("167")]),a("br"),a("span",{staticClass:"line-number"},[n._v("168")]),a("br"),a("span",{staticClass:"line-number"},[n._v("169")]),a("br"),a("span",{staticClass:"line-number"},[n._v("170")]),a("br"),a("span",{staticClass:"line-number"},[n._v("171")]),a("br"),a("span",{staticClass:"line-number"},[n._v("172")]),a("br"),a("span",{staticClass:"line-number"},[n._v("173")]),a("br"),a("span",{staticClass:"line-number"},[n._v("174")]),a("br"),a("span",{staticClass:"line-number"},[n._v("175")]),a("br"),a("span",{staticClass:"line-number"},[n._v("176")]),a("br"),a("span",{staticClass:"line-number"},[n._v("177")]),a("br"),a("span",{staticClass:"line-number"},[n._v("178")]),a("br"),a("span",{staticClass:"line-number"},[n._v("179")]),a("br"),a("span",{staticClass:"line-number"},[n._v("180")]),a("br"),a("span",{staticClass:"line-number"},[n._v("181")]),a("br"),a("span",{staticClass:"line-number"},[n._v("182")]),a("br"),a("span",{staticClass:"line-number"},[n._v("183")]),a("br"),a("span",{staticClass:"line-number"},[n._v("184")]),a("br"),a("span",{staticClass:"line-number"},[n._v("185")]),a("br"),a("span",{staticClass:"line-number"},[n._v("186")]),a("br"),a("span",{staticClass:"line-number"},[n._v("187")]),a("br"),a("span",{staticClass:"line-number"},[n._v("188")]),a("br"),a("span",{staticClass:"line-number"},[n._v("189")]),a("br"),a("span",{staticClass:"line-number"},[n._v("190")]),a("br"),a("span",{staticClass:"line-number"},[n._v("191")]),a("br"),a("span",{staticClass:"line-number"},[n._v("192")]),a("br"),a("span",{staticClass:"line-number"},[n._v("193")]),a("br"),a("span",{staticClass:"line-number"},[n._v("194")]),a("br"),a("span",{staticClass:"line-number"},[n._v("195")]),a("br"),a("span",{staticClass:"line-number"},[n._v("196")]),a("br"),a("span",{staticClass:"line-number"},[n._v("197")]),a("br"),a("span",{staticClass:"line-number"},[n._v("198")]),a("br"),a("span",{staticClass:"line-number"},[n._v("199")]),a("br"),a("span",{staticClass:"line-number"},[n._v("200")]),a("br"),a("span",{staticClass:"line-number"},[n._v("201")]),a("br"),a("span",{staticClass:"line-number"},[n._v("202")]),a("br"),a("span",{staticClass:"line-number"},[n._v("203")]),a("br"),a("span",{staticClass:"line-number"},[n._v("204")]),a("br"),a("span",{staticClass:"line-number"},[n._v("205")]),a("br"),a("span",{staticClass:"line-number"},[n._v("206")]),a("br"),a("span",{staticClass:"line-number"},[n._v("207")]),a("br"),a("span",{staticClass:"line-number"},[n._v("208")]),a("br"),a("span",{staticClass:"line-number"},[n._v("209")]),a("br"),a("span",{staticClass:"line-number"},[n._v("210")]),a("br"),a("span",{staticClass:"line-number"},[n._v("211")]),a("br"),a("span",{staticClass:"line-number"},[n._v("212")]),a("br"),a("span",{staticClass:"line-number"},[n._v("213")]),a("br"),a("span",{staticClass:"line-number"},[n._v("214")]),a("br"),a("span",{staticClass:"line-number"},[n._v("215")]),a("br"),a("span",{staticClass:"line-number"},[n._v("216")]),a("br"),a("span",{staticClass:"line-number"},[n._v("217")]),a("br"),a("span",{staticClass:"line-number"},[n._v("218")]),a("br"),a("span",{staticClass:"line-number"},[n._v("219")]),a("br"),a("span",{staticClass:"line-number"},[n._v("220")]),a("br"),a("span",{staticClass:"line-number"},[n._v("221")]),a("br"),a("span",{staticClass:"line-number"},[n._v("222")]),a("br"),a("span",{staticClass:"line-number"},[n._v("223")]),a("br"),a("span",{staticClass:"line-number"},[n._v("224")]),a("br"),a("span",{staticClass:"line-number"},[n._v("225")]),a("br"),a("span",{staticClass:"line-number"},[n._v("226")]),a("br"),a("span",{staticClass:"line-number"},[n._v("227")]),a("br"),a("span",{staticClass:"line-number"},[n._v("228")]),a("br"),a("span",{staticClass:"line-number"},[n._v("229")]),a("br"),a("span",{staticClass:"line-number"},[n._v("230")]),a("br"),a("span",{staticClass:"line-number"},[n._v("231")]),a("br"),a("span",{staticClass:"line-number"},[n._v("232")]),a("br"),a("span",{staticClass:"line-number"},[n._v("233")]),a("br"),a("span",{staticClass:"line-number"},[n._v("234")]),a("br"),a("span",{staticClass:"line-number"},[n._v("235")]),a("br"),a("span",{staticClass:"line-number"},[n._v("236")]),a("br"),a("span",{staticClass:"line-number"},[n._v("237")]),a("br"),a("span",{staticClass:"line-number"},[n._v("238")]),a("br"),a("span",{staticClass:"line-number"},[n._v("239")]),a("br"),a("span",{staticClass:"line-number"},[n._v("240")]),a("br"),a("span",{staticClass:"line-number"},[n._v("241")]),a("br"),a("span",{staticClass:"line-number"},[n._v("242")]),a("br"),a("span",{staticClass:"line-number"},[n._v("243")]),a("br"),a("span",{staticClass:"line-number"},[n._v("244")]),a("br"),a("span",{staticClass:"line-number"},[n._v("245")]),a("br"),a("span",{staticClass:"line-number"},[n._v("246")]),a("br"),a("span",{staticClass:"line-number"},[n._v("247")]),a("br"),a("span",{staticClass:"line-number"},[n._v("248")]),a("br"),a("span",{staticClass:"line-number"},[n._v("249")]),a("br"),a("span",{staticClass:"line-number"},[n._v("250")]),a("br"),a("span",{staticClass:"line-number"},[n._v("251")]),a("br"),a("span",{staticClass:"line-number"},[n._v("252")]),a("br"),a("span",{staticClass:"line-number"},[n._v("253")]),a("br"),a("span",{staticClass:"line-number"},[n._v("254")]),a("br"),a("span",{staticClass:"line-number"},[n._v("255")]),a("br"),a("span",{staticClass:"line-number"},[n._v("256")]),a("br"),a("span",{staticClass:"line-number"},[n._v("257")]),a("br"),a("span",{staticClass:"line-number"},[n._v("258")]),a("br"),a("span",{staticClass:"line-number"},[n._v("259")]),a("br"),a("span",{staticClass:"line-number"},[n._v("260")]),a("br"),a("span",{staticClass:"line-number"},[n._v("261")]),a("br"),a("span",{staticClass:"line-number"},[n._v("262")]),a("br")])]),a("h2",{attrs:{id:"上面的controller封装好之后以此为基础-建立新的controller层"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#上面的controller封装好之后以此为基础-建立新的controller层"}},[n._v("#")]),n._v(" 上面的controller封装好之后以此为基础,建立新的controller层")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('package controllers\n\nimport (\n    "fmt"\n    "log"\n    "time"\n)\n\ntype ShopController struct {\n    ywcontroller\n}\n\n\nfunc (this *ShopController) UpdateShopInfo() {\n    //根据名称接收数据转为int\n    //shopid := this.GetParamAsInt("shopid")\n\n    //根据名称接收数据类型为string,这里有防止sql注入,下面的没有\n    shopid := this.GetParamAsSqlString("shopid")\n\n    //根据名称接收数据类型为string,没有防止sql注入,上面的有\n    shopid := this.GetParamAsString("shopid")\n\n    //获取session里的信息，比如登录\n    shopid, ok := this.GetUserSession("shopid")\n    if !ok{//做一些事,比如返回首页}\n\n    //删除session\n    //this.DelUserSession()\n\n    //设置session\n    //this.SetUserSession(map[string]string{"shopid": "1","id":"1","tel":"123"})\n\n    //返回页面(可携带数据,借助模版语句起到修改页面的作用)\n    this.Data["height"] = "100"\n    this.TplName = "shopauditingsinfo.html"\n\n    //返回字符串(这里是返回了分页查询结果的字符串)\n    data, err := models.Querylist("select * from shopauditings", pageindex, pagesize)\n    if err != nil {\n        log.Println(err)\n        this.ReturnJsonString(0, "获取店铺信息列表失败", "")\n        return\n    }\n    bt, _ := json.Marshal(data)\n    this.ReturnString(string(bt))\n\n    //返回json字符串(状态值、消息字符串,数据),数据是interface{}\n    //this.ReturnJsonString(0, "获取店铺信息列表失败", "")\n\n}\n\n上面用this.Data["height"] = "100"携带到页面的数据,可以用模版语句利用\n\njs里面\nif("{{.height}}" != ""){\n    //执行一些代码\n}\n\n页面里\n<input type="text" style="display:none" value="{{.height}}" >\n\n页面或者js里进行比较(这里ne是不相等,eq是相等,之前有过一次用eq没效果,换成isEqual就行了)\n{{if ne .height "1"}}\n一些代码\n{{else}}\n一些代码\n{{end}}\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br"),a("span",{staticClass:"line-number"},[n._v("26")]),a("br"),a("span",{staticClass:"line-number"},[n._v("27")]),a("br"),a("span",{staticClass:"line-number"},[n._v("28")]),a("br"),a("span",{staticClass:"line-number"},[n._v("29")]),a("br"),a("span",{staticClass:"line-number"},[n._v("30")]),a("br"),a("span",{staticClass:"line-number"},[n._v("31")]),a("br"),a("span",{staticClass:"line-number"},[n._v("32")]),a("br"),a("span",{staticClass:"line-number"},[n._v("33")]),a("br"),a("span",{staticClass:"line-number"},[n._v("34")]),a("br"),a("span",{staticClass:"line-number"},[n._v("35")]),a("br"),a("span",{staticClass:"line-number"},[n._v("36")]),a("br"),a("span",{staticClass:"line-number"},[n._v("37")]),a("br"),a("span",{staticClass:"line-number"},[n._v("38")]),a("br"),a("span",{staticClass:"line-number"},[n._v("39")]),a("br"),a("span",{staticClass:"line-number"},[n._v("40")]),a("br"),a("span",{staticClass:"line-number"},[n._v("41")]),a("br"),a("span",{staticClass:"line-number"},[n._v("42")]),a("br"),a("span",{staticClass:"line-number"},[n._v("43")]),a("br"),a("span",{staticClass:"line-number"},[n._v("44")]),a("br"),a("span",{staticClass:"line-number"},[n._v("45")]),a("br"),a("span",{staticClass:"line-number"},[n._v("46")]),a("br"),a("span",{staticClass:"line-number"},[n._v("47")]),a("br"),a("span",{staticClass:"line-number"},[n._v("48")]),a("br"),a("span",{staticClass:"line-number"},[n._v("49")]),a("br"),a("span",{staticClass:"line-number"},[n._v("50")]),a("br"),a("span",{staticClass:"line-number"},[n._v("51")]),a("br"),a("span",{staticClass:"line-number"},[n._v("52")]),a("br"),a("span",{staticClass:"line-number"},[n._v("53")]),a("br"),a("span",{staticClass:"line-number"},[n._v("54")]),a("br"),a("span",{staticClass:"line-number"},[n._v("55")]),a("br"),a("span",{staticClass:"line-number"},[n._v("56")]),a("br"),a("span",{staticClass:"line-number"},[n._v("57")]),a("br"),a("span",{staticClass:"line-number"},[n._v("58")]),a("br"),a("span",{staticClass:"line-number"},[n._v("59")]),a("br"),a("span",{staticClass:"line-number"},[n._v("60")]),a("br"),a("span",{staticClass:"line-number"},[n._v("61")]),a("br"),a("span",{staticClass:"line-number"},[n._v("62")]),a("br"),a("span",{staticClass:"line-number"},[n._v("63")]),a("br"),a("span",{staticClass:"line-number"},[n._v("64")]),a("br"),a("span",{staticClass:"line-number"},[n._v("65")]),a("br"),a("span",{staticClass:"line-number"},[n._v("66")]),a("br"),a("span",{staticClass:"line-number"},[n._v("67")]),a("br"),a("span",{staticClass:"line-number"},[n._v("68")]),a("br")])]),a("h2",{attrs:{id:"beego框架里model层的连接数据库和一些查询方法封装"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#beego框架里model层的连接数据库和一些查询方法封装"}},[n._v("#")]),n._v(" beego框架里model层的连接数据库和一些查询方法封装")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('package models\n\nimport (\n    "database/sql"\n    "fmt"\n    // 下面这个连接mysql的时候用\n    _ "github.com/go-sql-driver/mysql"\n    //下面这个连接oracle的时候用\n    //_ "github.com/jzaikovs/ora"\n    "io/ioutil"\n    "log"\n    "os"\n    "path/filepath"\n    "strconv"\n    "strings"\n    "time"\n)\n\nvar (\n    dbconn *sql.DB = nil\n)\n\n// 返回数据库可以直接查询\nfunc GetConn() *sql.DB {\n    return dbconn\n}\n\n//返回事务\nfunc GetTx() (*sql.Tx, error) {\n    return dbconn.Begin()\n}\n\n//打开数据库(顺便建表、初始化数据或者加入存储过程等)\n//在main.go里面执行下面语句以执行\n//err := models.Init()\n//  if err != nil {\n//      log.Panic(err.Error())\n//  }\n//  err = models.DBInit()\n//  if err != nil {\n//      log.Panic(err.Error())\n//  }\nfunc DBInit() error {\n    // 这个是链接mysql\n    //sql.Open(mysql,root:root@tcp(192.168.15.51:3306)/ecommerce)\n    sqldb, err := sql.Open(GetConfig().DBType, GetConfig().DBSour)\n    if err != nil {\n        return fmt.Errorf("打开数据库失败：%s", err.Error())\n    }\n    // 这个是链接oracle (用户名/密码@//ip:端口/数据库名)\n    // sqldb2, err := sql.Open("ora", "system/oracle@//172.16.18.96:1522/wlsi")\n    // if err != nil {\n    //  return fmt.Errorf("打开数据库失败：%s", err.Error())\n    // }\n    Dbconn2 = sqldb2\n    dbconn = sqldb\n    CreateTable()\n    initData()\n    return nil\n}\n\n//建表(在相应文件里放入文件,里面写对应的sql的语句,程序启动时候自动执行，可以建表或者自动增加存储过程)\nfunc CreateTable() {\n    dir := []string{"./table/table", "./table/drop", "./table/create"}\n    for _, one := range dir {\n        filepath.Walk(one, func(path string, fs os.FileInfo, err error) error {\n            if !fs.IsDir() {\n                b, err := ioutil.ReadFile(path)\n                if err != nil {\n                    log.Panic(err.Error())\n                }\n                _, err = dbconn.Exec(string(b))\n                if err != nil {\n                    log.Panic(err.Error())\n                }\n            }\n            return nil\n        })\n    }\n}\n\n//初始化数据\nfunc initData() {\n    NotFindDoExec("select count(*) as num from config where `key`=\'password\'",\n        "insert into config(`key`,`value`) values(\'password\',\'123456\')")\n\n    filepath.Walk("./datainit", func(path string, fs os.FileInfo, err error) error {\n        if !fs.IsDir() {\n            tableName := strings.Replace(fs.Name(), filepath.Ext(fs.Name()), "", 1)\n            bSql, err := ioutil.ReadFile(path)\n            if err != nil {\n                log.Panic(err.Error())\n            }\n            num, err := Count("select count(*) as num from " + tableName)\n            if err != nil {\n                log.Panic(err.Error())\n            }\n            if num == 0 {\n                sql := string(bSql)\n                arrsql := strings.Split(sql, ";\\r\\n")\n                for _, v := range arrsql {\n                    err := Exec(v)\n                    if err != nil {\n                        log.Panic(err)\n                    }\n                }\n            }\n        }\n        return nil\n    })\n}\n\n//方便查询，目前返回[]map[string]string内容\nfunc Query(sql string) ([]map[string]string, error) {\n    rows, err := dbconn.Query(sql)\n    if err != nil {\n        log.Println(sql, err.Error())\n        return nil, err\n    }\n    return RowsToMapList(rows)\n}\n\nfunc Exec(sql string) error {\n    _, err := dbconn.Exec(sql)\n    if err != nil {\n        log.Println(sql, err.Error())\n    }\n    return err\n}\n\nfunc QueryTableList(query string, pageindex int, pagesize int) (map[string]interface{}, error) {\n    if pagesize <= 0 {\n        pagesize = 10\n    }\n    if pageindex <= 0 {\n        pageindex = 1\n    }\n    totalCount := 0\n\n    table_map := make(map[string]interface{})\n    table_data := make([]map[string]interface{}, 0)\n    rows, err := dbconn.Query(query)\n    if err != nil {\n        return table_map, err\n    }\n    fields, err := rows.Columns()\n    if err != nil {\n        return table_map, err\n    }\n    fields_size := len(fields)\n    //移到开始位置\n    n := time.Now()\n    for totalCount < (pageindex-1)*pagesize && rows.Next() {\n        totalCount++\n    }\n    log.Println(time.Now().Sub(n))\n    hxindex := (pageindex - 1) * pagesize\n    //取值\n    n = time.Now()\n    for rows.Next() {\n        addmap := make(map[string]interface{})\n        hxindex++\n        totalCount++\n        if len(table_data) >= pagesize {\n            break\n        }\n        values := make([]sql.NullString, fields_size)\n        scanArgs := make([]interface{}, fields_size)\n        for i := 0; i < fields_size; i++ {\n            scanArgs[i] = &values[i]\n        }\n        err = rows.Scan(scanArgs...)\n        dataMap, err := rowToMap(values, fields)\n        if err != nil {\n            return table_map, err\n        }\n        dataMap["xhid"] = fmt.Sprint(hxindex)\n        addmap["id"] = fmt.Sprint(hxindex)\n        addmap["cell"] = dataMap\n        table_data = append(table_data, addmap)\n    }\n    log.Println(time.Now().Sub(n))\n    n = time.Now()\n    for rows.Next() {\n        totalCount++\n    }\n\n    log.Println(time.Now().Sub(n))\n    totalPage := 0\n    if totalCount%pagesize == 0 {\n        totalPage = totalCount / pagesize\n    } else {\n        totalPage = totalCount/pagesize + 1\n    }\n    table_map["pageIndex"] = pageindex\n    table_map["totalCount"] = totalCount\n    table_map["pageSize"] = pagesize\n    table_map["totalPage"] = totalPage\n    table_map["data"] = table_data\n    return table_map, nil\n}\n\n//查询结果集row 的[]string转成map\nfunc rowToMap(rows []sql.NullString, fields []string) (map[string]string, error) {\n    rstMap := make(map[string]string)\n    if len(rows) != len(fields) {\n        return rstMap, fmt.Errorf("数据库查询结果集：rows与fields的数量不相等")\n    }\n    for k, v := range rows {\n        rstMap[fields[k]] = v.String\n    }\n    return rstMap, nil\n}\n\n//数据库查询rows转换成maplist类型\nfunc RowsToMapList(rows *sql.Rows) ([]map[string]string, error) {\n    var maplist []map[string]string = make([]map[string]string, 0)\n    cols, err := rows.Columns()\n    if err != nil {\n        return nil, err\n    }\n    colsize := len(cols)\n    for rows.Next() {\n        values := make([]sql.NullString, colsize)\n        scanArgs := make([]interface{}, colsize)\n        for i := 0; i < colsize; i++ {\n            scanArgs[i] = &values[i]\n        }\n        err = rows.Scan(scanArgs...)\n        oneMap := make(map[string]string)\n        for k, v := range values {\n            oneMap[cols[k]] = v.String\n        }\n        maplist = append(maplist, oneMap)\n    }\n    return maplist, nil\n}\n\nfunc Find(sql string) (map[string]string, error) {\n    maplist, err := Query(sql)\n    if err != nil {\n        log.Println("error:", err.Error(), sql)\n        return nil, fmt.Errorf("请稍后")\n    }\n    if len(maplist) == 0 {\n        return nil, nil\n    }\n    return maplist[0], nil\n}\n\n// 用sql语句查数据,自己count(1)起个别名num,返回num\n//比如NotFindDoExec("select count(*) as num from config where `key`=\'password\'","insert into config(`key`,`value`) values(\'password\',\'123456\')")\nfunc Count(sql string) (int, error) {\n    map_data, err := Find(sql)\n    if err != nil {\n        return 0, err\n    }\n    num, err := strconv.Atoi(map_data["num"])\n    if err != nil {\n        return 0, err\n    }\n    return num, nil\n}\n\n// count里面查出来的num如果为0,再去执行\nfunc NotFindDoExec(query, exec string) {\n    num, err := Count(query)\n    if err != nil {\n        log.Panic(err.Error())\n    }\n    if num == 0 {\n        _, err = GetConn().Exec(exec)\n        if err != nil {\n            log.Panic(err.Error())\n        }\n    }\n}\n\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br"),a("span",{staticClass:"line-number"},[n._v("26")]),a("br"),a("span",{staticClass:"line-number"},[n._v("27")]),a("br"),a("span",{staticClass:"line-number"},[n._v("28")]),a("br"),a("span",{staticClass:"line-number"},[n._v("29")]),a("br"),a("span",{staticClass:"line-number"},[n._v("30")]),a("br"),a("span",{staticClass:"line-number"},[n._v("31")]),a("br"),a("span",{staticClass:"line-number"},[n._v("32")]),a("br"),a("span",{staticClass:"line-number"},[n._v("33")]),a("br"),a("span",{staticClass:"line-number"},[n._v("34")]),a("br"),a("span",{staticClass:"line-number"},[n._v("35")]),a("br"),a("span",{staticClass:"line-number"},[n._v("36")]),a("br"),a("span",{staticClass:"line-number"},[n._v("37")]),a("br"),a("span",{staticClass:"line-number"},[n._v("38")]),a("br"),a("span",{staticClass:"line-number"},[n._v("39")]),a("br"),a("span",{staticClass:"line-number"},[n._v("40")]),a("br"),a("span",{staticClass:"line-number"},[n._v("41")]),a("br"),a("span",{staticClass:"line-number"},[n._v("42")]),a("br"),a("span",{staticClass:"line-number"},[n._v("43")]),a("br"),a("span",{staticClass:"line-number"},[n._v("44")]),a("br"),a("span",{staticClass:"line-number"},[n._v("45")]),a("br"),a("span",{staticClass:"line-number"},[n._v("46")]),a("br"),a("span",{staticClass:"line-number"},[n._v("47")]),a("br"),a("span",{staticClass:"line-number"},[n._v("48")]),a("br"),a("span",{staticClass:"line-number"},[n._v("49")]),a("br"),a("span",{staticClass:"line-number"},[n._v("50")]),a("br"),a("span",{staticClass:"line-number"},[n._v("51")]),a("br"),a("span",{staticClass:"line-number"},[n._v("52")]),a("br"),a("span",{staticClass:"line-number"},[n._v("53")]),a("br"),a("span",{staticClass:"line-number"},[n._v("54")]),a("br"),a("span",{staticClass:"line-number"},[n._v("55")]),a("br"),a("span",{staticClass:"line-number"},[n._v("56")]),a("br"),a("span",{staticClass:"line-number"},[n._v("57")]),a("br"),a("span",{staticClass:"line-number"},[n._v("58")]),a("br"),a("span",{staticClass:"line-number"},[n._v("59")]),a("br"),a("span",{staticClass:"line-number"},[n._v("60")]),a("br"),a("span",{staticClass:"line-number"},[n._v("61")]),a("br"),a("span",{staticClass:"line-number"},[n._v("62")]),a("br"),a("span",{staticClass:"line-number"},[n._v("63")]),a("br"),a("span",{staticClass:"line-number"},[n._v("64")]),a("br"),a("span",{staticClass:"line-number"},[n._v("65")]),a("br"),a("span",{staticClass:"line-number"},[n._v("66")]),a("br"),a("span",{staticClass:"line-number"},[n._v("67")]),a("br"),a("span",{staticClass:"line-number"},[n._v("68")]),a("br"),a("span",{staticClass:"line-number"},[n._v("69")]),a("br"),a("span",{staticClass:"line-number"},[n._v("70")]),a("br"),a("span",{staticClass:"line-number"},[n._v("71")]),a("br"),a("span",{staticClass:"line-number"},[n._v("72")]),a("br"),a("span",{staticClass:"line-number"},[n._v("73")]),a("br"),a("span",{staticClass:"line-number"},[n._v("74")]),a("br"),a("span",{staticClass:"line-number"},[n._v("75")]),a("br"),a("span",{staticClass:"line-number"},[n._v("76")]),a("br"),a("span",{staticClass:"line-number"},[n._v("77")]),a("br"),a("span",{staticClass:"line-number"},[n._v("78")]),a("br"),a("span",{staticClass:"line-number"},[n._v("79")]),a("br"),a("span",{staticClass:"line-number"},[n._v("80")]),a("br"),a("span",{staticClass:"line-number"},[n._v("81")]),a("br"),a("span",{staticClass:"line-number"},[n._v("82")]),a("br"),a("span",{staticClass:"line-number"},[n._v("83")]),a("br"),a("span",{staticClass:"line-number"},[n._v("84")]),a("br"),a("span",{staticClass:"line-number"},[n._v("85")]),a("br"),a("span",{staticClass:"line-number"},[n._v("86")]),a("br"),a("span",{staticClass:"line-number"},[n._v("87")]),a("br"),a("span",{staticClass:"line-number"},[n._v("88")]),a("br"),a("span",{staticClass:"line-number"},[n._v("89")]),a("br"),a("span",{staticClass:"line-number"},[n._v("90")]),a("br"),a("span",{staticClass:"line-number"},[n._v("91")]),a("br"),a("span",{staticClass:"line-number"},[n._v("92")]),a("br"),a("span",{staticClass:"line-number"},[n._v("93")]),a("br"),a("span",{staticClass:"line-number"},[n._v("94")]),a("br"),a("span",{staticClass:"line-number"},[n._v("95")]),a("br"),a("span",{staticClass:"line-number"},[n._v("96")]),a("br"),a("span",{staticClass:"line-number"},[n._v("97")]),a("br"),a("span",{staticClass:"line-number"},[n._v("98")]),a("br"),a("span",{staticClass:"line-number"},[n._v("99")]),a("br"),a("span",{staticClass:"line-number"},[n._v("100")]),a("br"),a("span",{staticClass:"line-number"},[n._v("101")]),a("br"),a("span",{staticClass:"line-number"},[n._v("102")]),a("br"),a("span",{staticClass:"line-number"},[n._v("103")]),a("br"),a("span",{staticClass:"line-number"},[n._v("104")]),a("br"),a("span",{staticClass:"line-number"},[n._v("105")]),a("br"),a("span",{staticClass:"line-number"},[n._v("106")]),a("br"),a("span",{staticClass:"line-number"},[n._v("107")]),a("br"),a("span",{staticClass:"line-number"},[n._v("108")]),a("br"),a("span",{staticClass:"line-number"},[n._v("109")]),a("br"),a("span",{staticClass:"line-number"},[n._v("110")]),a("br"),a("span",{staticClass:"line-number"},[n._v("111")]),a("br"),a("span",{staticClass:"line-number"},[n._v("112")]),a("br"),a("span",{staticClass:"line-number"},[n._v("113")]),a("br"),a("span",{staticClass:"line-number"},[n._v("114")]),a("br"),a("span",{staticClass:"line-number"},[n._v("115")]),a("br"),a("span",{staticClass:"line-number"},[n._v("116")]),a("br"),a("span",{staticClass:"line-number"},[n._v("117")]),a("br"),a("span",{staticClass:"line-number"},[n._v("118")]),a("br"),a("span",{staticClass:"line-number"},[n._v("119")]),a("br"),a("span",{staticClass:"line-number"},[n._v("120")]),a("br"),a("span",{staticClass:"line-number"},[n._v("121")]),a("br"),a("span",{staticClass:"line-number"},[n._v("122")]),a("br"),a("span",{staticClass:"line-number"},[n._v("123")]),a("br"),a("span",{staticClass:"line-number"},[n._v("124")]),a("br"),a("span",{staticClass:"line-number"},[n._v("125")]),a("br"),a("span",{staticClass:"line-number"},[n._v("126")]),a("br"),a("span",{staticClass:"line-number"},[n._v("127")]),a("br"),a("span",{staticClass:"line-number"},[n._v("128")]),a("br"),a("span",{staticClass:"line-number"},[n._v("129")]),a("br"),a("span",{staticClass:"line-number"},[n._v("130")]),a("br"),a("span",{staticClass:"line-number"},[n._v("131")]),a("br"),a("span",{staticClass:"line-number"},[n._v("132")]),a("br"),a("span",{staticClass:"line-number"},[n._v("133")]),a("br"),a("span",{staticClass:"line-number"},[n._v("134")]),a("br"),a("span",{staticClass:"line-number"},[n._v("135")]),a("br"),a("span",{staticClass:"line-number"},[n._v("136")]),a("br"),a("span",{staticClass:"line-number"},[n._v("137")]),a("br"),a("span",{staticClass:"line-number"},[n._v("138")]),a("br"),a("span",{staticClass:"line-number"},[n._v("139")]),a("br"),a("span",{staticClass:"line-number"},[n._v("140")]),a("br"),a("span",{staticClass:"line-number"},[n._v("141")]),a("br"),a("span",{staticClass:"line-number"},[n._v("142")]),a("br"),a("span",{staticClass:"line-number"},[n._v("143")]),a("br"),a("span",{staticClass:"line-number"},[n._v("144")]),a("br"),a("span",{staticClass:"line-number"},[n._v("145")]),a("br"),a("span",{staticClass:"line-number"},[n._v("146")]),a("br"),a("span",{staticClass:"line-number"},[n._v("147")]),a("br"),a("span",{staticClass:"line-number"},[n._v("148")]),a("br"),a("span",{staticClass:"line-number"},[n._v("149")]),a("br"),a("span",{staticClass:"line-number"},[n._v("150")]),a("br"),a("span",{staticClass:"line-number"},[n._v("151")]),a("br"),a("span",{staticClass:"line-number"},[n._v("152")]),a("br"),a("span",{staticClass:"line-number"},[n._v("153")]),a("br"),a("span",{staticClass:"line-number"},[n._v("154")]),a("br"),a("span",{staticClass:"line-number"},[n._v("155")]),a("br"),a("span",{staticClass:"line-number"},[n._v("156")]),a("br"),a("span",{staticClass:"line-number"},[n._v("157")]),a("br"),a("span",{staticClass:"line-number"},[n._v("158")]),a("br"),a("span",{staticClass:"line-number"},[n._v("159")]),a("br"),a("span",{staticClass:"line-number"},[n._v("160")]),a("br"),a("span",{staticClass:"line-number"},[n._v("161")]),a("br"),a("span",{staticClass:"line-number"},[n._v("162")]),a("br"),a("span",{staticClass:"line-number"},[n._v("163")]),a("br"),a("span",{staticClass:"line-number"},[n._v("164")]),a("br"),a("span",{staticClass:"line-number"},[n._v("165")]),a("br"),a("span",{staticClass:"line-number"},[n._v("166")]),a("br"),a("span",{staticClass:"line-number"},[n._v("167")]),a("br"),a("span",{staticClass:"line-number"},[n._v("168")]),a("br"),a("span",{staticClass:"line-number"},[n._v("169")]),a("br"),a("span",{staticClass:"line-number"},[n._v("170")]),a("br"),a("span",{staticClass:"line-number"},[n._v("171")]),a("br"),a("span",{staticClass:"line-number"},[n._v("172")]),a("br"),a("span",{staticClass:"line-number"},[n._v("173")]),a("br"),a("span",{staticClass:"line-number"},[n._v("174")]),a("br"),a("span",{staticClass:"line-number"},[n._v("175")]),a("br"),a("span",{staticClass:"line-number"},[n._v("176")]),a("br"),a("span",{staticClass:"line-number"},[n._v("177")]),a("br"),a("span",{staticClass:"line-number"},[n._v("178")]),a("br"),a("span",{staticClass:"line-number"},[n._v("179")]),a("br"),a("span",{staticClass:"line-number"},[n._v("180")]),a("br"),a("span",{staticClass:"line-number"},[n._v("181")]),a("br"),a("span",{staticClass:"line-number"},[n._v("182")]),a("br"),a("span",{staticClass:"line-number"},[n._v("183")]),a("br"),a("span",{staticClass:"line-number"},[n._v("184")]),a("br"),a("span",{staticClass:"line-number"},[n._v("185")]),a("br"),a("span",{staticClass:"line-number"},[n._v("186")]),a("br"),a("span",{staticClass:"line-number"},[n._v("187")]),a("br"),a("span",{staticClass:"line-number"},[n._v("188")]),a("br"),a("span",{staticClass:"line-number"},[n._v("189")]),a("br"),a("span",{staticClass:"line-number"},[n._v("190")]),a("br"),a("span",{staticClass:"line-number"},[n._v("191")]),a("br"),a("span",{staticClass:"line-number"},[n._v("192")]),a("br"),a("span",{staticClass:"line-number"},[n._v("193")]),a("br"),a("span",{staticClass:"line-number"},[n._v("194")]),a("br"),a("span",{staticClass:"line-number"},[n._v("195")]),a("br"),a("span",{staticClass:"line-number"},[n._v("196")]),a("br"),a("span",{staticClass:"line-number"},[n._v("197")]),a("br"),a("span",{staticClass:"line-number"},[n._v("198")]),a("br"),a("span",{staticClass:"line-number"},[n._v("199")]),a("br"),a("span",{staticClass:"line-number"},[n._v("200")]),a("br"),a("span",{staticClass:"line-number"},[n._v("201")]),a("br"),a("span",{staticClass:"line-number"},[n._v("202")]),a("br"),a("span",{staticClass:"line-number"},[n._v("203")]),a("br"),a("span",{staticClass:"line-number"},[n._v("204")]),a("br"),a("span",{staticClass:"line-number"},[n._v("205")]),a("br"),a("span",{staticClass:"line-number"},[n._v("206")]),a("br"),a("span",{staticClass:"line-number"},[n._v("207")]),a("br"),a("span",{staticClass:"line-number"},[n._v("208")]),a("br"),a("span",{staticClass:"line-number"},[n._v("209")]),a("br"),a("span",{staticClass:"line-number"},[n._v("210")]),a("br"),a("span",{staticClass:"line-number"},[n._v("211")]),a("br"),a("span",{staticClass:"line-number"},[n._v("212")]),a("br"),a("span",{staticClass:"line-number"},[n._v("213")]),a("br"),a("span",{staticClass:"line-number"},[n._v("214")]),a("br"),a("span",{staticClass:"line-number"},[n._v("215")]),a("br"),a("span",{staticClass:"line-number"},[n._v("216")]),a("br"),a("span",{staticClass:"line-number"},[n._v("217")]),a("br"),a("span",{staticClass:"line-number"},[n._v("218")]),a("br"),a("span",{staticClass:"line-number"},[n._v("219")]),a("br"),a("span",{staticClass:"line-number"},[n._v("220")]),a("br"),a("span",{staticClass:"line-number"},[n._v("221")]),a("br"),a("span",{staticClass:"line-number"},[n._v("222")]),a("br"),a("span",{staticClass:"line-number"},[n._v("223")]),a("br"),a("span",{staticClass:"line-number"},[n._v("224")]),a("br"),a("span",{staticClass:"line-number"},[n._v("225")]),a("br"),a("span",{staticClass:"line-number"},[n._v("226")]),a("br"),a("span",{staticClass:"line-number"},[n._v("227")]),a("br"),a("span",{staticClass:"line-number"},[n._v("228")]),a("br"),a("span",{staticClass:"line-number"},[n._v("229")]),a("br"),a("span",{staticClass:"line-number"},[n._v("230")]),a("br"),a("span",{staticClass:"line-number"},[n._v("231")]),a("br"),a("span",{staticClass:"line-number"},[n._v("232")]),a("br"),a("span",{staticClass:"line-number"},[n._v("233")]),a("br"),a("span",{staticClass:"line-number"},[n._v("234")]),a("br"),a("span",{staticClass:"line-number"},[n._v("235")]),a("br"),a("span",{staticClass:"line-number"},[n._v("236")]),a("br"),a("span",{staticClass:"line-number"},[n._v("237")]),a("br"),a("span",{staticClass:"line-number"},[n._v("238")]),a("br"),a("span",{staticClass:"line-number"},[n._v("239")]),a("br"),a("span",{staticClass:"line-number"},[n._v("240")]),a("br"),a("span",{staticClass:"line-number"},[n._v("241")]),a("br"),a("span",{staticClass:"line-number"},[n._v("242")]),a("br"),a("span",{staticClass:"line-number"},[n._v("243")]),a("br"),a("span",{staticClass:"line-number"},[n._v("244")]),a("br"),a("span",{staticClass:"line-number"},[n._v("245")]),a("br"),a("span",{staticClass:"line-number"},[n._v("246")]),a("br"),a("span",{staticClass:"line-number"},[n._v("247")]),a("br"),a("span",{staticClass:"line-number"},[n._v("248")]),a("br"),a("span",{staticClass:"line-number"},[n._v("249")]),a("br"),a("span",{staticClass:"line-number"},[n._v("250")]),a("br"),a("span",{staticClass:"line-number"},[n._v("251")]),a("br"),a("span",{staticClass:"line-number"},[n._v("252")]),a("br"),a("span",{staticClass:"line-number"},[n._v("253")]),a("br"),a("span",{staticClass:"line-number"},[n._v("254")]),a("br"),a("span",{staticClass:"line-number"},[n._v("255")]),a("br"),a("span",{staticClass:"line-number"},[n._v("256")]),a("br"),a("span",{staticClass:"line-number"},[n._v("257")]),a("br"),a("span",{staticClass:"line-number"},[n._v("258")]),a("br"),a("span",{staticClass:"line-number"},[n._v("259")]),a("br"),a("span",{staticClass:"line-number"},[n._v("260")]),a("br"),a("span",{staticClass:"line-number"},[n._v("261")]),a("br"),a("span",{staticClass:"line-number"},[n._v("262")]),a("br"),a("span",{staticClass:"line-number"},[n._v("263")]),a("br"),a("span",{staticClass:"line-number"},[n._v("264")]),a("br"),a("span",{staticClass:"line-number"},[n._v("265")]),a("br"),a("span",{staticClass:"line-number"},[n._v("266")]),a("br"),a("span",{staticClass:"line-number"},[n._v("267")]),a("br"),a("span",{staticClass:"line-number"},[n._v("268")]),a("br"),a("span",{staticClass:"line-number"},[n._v("269")]),a("br"),a("span",{staticClass:"line-number"},[n._v("270")]),a("br"),a("span",{staticClass:"line-number"},[n._v("271")]),a("br"),a("span",{staticClass:"line-number"},[n._v("272")]),a("br"),a("span",{staticClass:"line-number"},[n._v("273")]),a("br"),a("span",{staticClass:"line-number"},[n._v("274")]),a("br"),a("span",{staticClass:"line-number"},[n._v("275")]),a("br"),a("span",{staticClass:"line-number"},[n._v("276")]),a("br"),a("span",{staticClass:"line-number"},[n._v("277")]),a("br"),a("span",{staticClass:"line-number"},[n._v("278")]),a("br")])]),a("h2",{attrs:{id:"beego框架里model层的读取config-xml里的一些配置项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#beego框架里model层的读取config-xml里的一些配置项"}},[n._v("#")]),n._v(" beego框架里model层的读取config.xml里的一些配置项")]),n._v(" "),a("div",{staticClass:"language- line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[n._v('package models\n\nimport (\n    "encoding/xml"\n    "io/ioutil"\n)\n\nvar (\n    config *Config = nil\n)\n\ntype Config struct {\n    DBType        string `xml:"dbtype"`\n    DBSour        string `xml:"dbsour"`\n    Product       string `xml:"product"`\n    Lv            int    `xml:"lv"`\n    EmailAddr     string `xml:"emailaddr"`\n    Authorization string `xml:"authorization"`\n    NiceName      string `xml:"nicename"`\n}\n\nfunc GetConfig() *Config {\n    return config\n    // 可以在其他models里用GetConfig()这个方法获取读取结果，再从结果里拿具体的配置\n    //GetConfig().DBType\n    //GetConfig().DBSour\n}\n\n//在main.go里面执行下面语句以执行各个models层里的Init()\n//err := models.Init()\n//  if err != nil {\n//      log.Panic(err.Error())\n//  }\n//  err = models.DBInit()\n//  if err != nil {\n//      log.Panic(err.Error())\n//  }\nfunc Init() error {\n    b_config, err := ioutil.ReadFile("./conf/config.xml")\n    if err != nil {\n        return err\n    }\n    return xml.Unmarshal(b_config, &config)\n}\n\n')])]),n._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[n._v("1")]),a("br"),a("span",{staticClass:"line-number"},[n._v("2")]),a("br"),a("span",{staticClass:"line-number"},[n._v("3")]),a("br"),a("span",{staticClass:"line-number"},[n._v("4")]),a("br"),a("span",{staticClass:"line-number"},[n._v("5")]),a("br"),a("span",{staticClass:"line-number"},[n._v("6")]),a("br"),a("span",{staticClass:"line-number"},[n._v("7")]),a("br"),a("span",{staticClass:"line-number"},[n._v("8")]),a("br"),a("span",{staticClass:"line-number"},[n._v("9")]),a("br"),a("span",{staticClass:"line-number"},[n._v("10")]),a("br"),a("span",{staticClass:"line-number"},[n._v("11")]),a("br"),a("span",{staticClass:"line-number"},[n._v("12")]),a("br"),a("span",{staticClass:"line-number"},[n._v("13")]),a("br"),a("span",{staticClass:"line-number"},[n._v("14")]),a("br"),a("span",{staticClass:"line-number"},[n._v("15")]),a("br"),a("span",{staticClass:"line-number"},[n._v("16")]),a("br"),a("span",{staticClass:"line-number"},[n._v("17")]),a("br"),a("span",{staticClass:"line-number"},[n._v("18")]),a("br"),a("span",{staticClass:"line-number"},[n._v("19")]),a("br"),a("span",{staticClass:"line-number"},[n._v("20")]),a("br"),a("span",{staticClass:"line-number"},[n._v("21")]),a("br"),a("span",{staticClass:"line-number"},[n._v("22")]),a("br"),a("span",{staticClass:"line-number"},[n._v("23")]),a("br"),a("span",{staticClass:"line-number"},[n._v("24")]),a("br"),a("span",{staticClass:"line-number"},[n._v("25")]),a("br"),a("span",{staticClass:"line-number"},[n._v("26")]),a("br"),a("span",{staticClass:"line-number"},[n._v("27")]),a("br"),a("span",{staticClass:"line-number"},[n._v("28")]),a("br"),a("span",{staticClass:"line-number"},[n._v("29")]),a("br"),a("span",{staticClass:"line-number"},[n._v("30")]),a("br"),a("span",{staticClass:"line-number"},[n._v("31")]),a("br"),a("span",{staticClass:"line-number"},[n._v("32")]),a("br"),a("span",{staticClass:"line-number"},[n._v("33")]),a("br"),a("span",{staticClass:"line-number"},[n._v("34")]),a("br"),a("span",{staticClass:"line-number"},[n._v("35")]),a("br"),a("span",{staticClass:"line-number"},[n._v("36")]),a("br"),a("span",{staticClass:"line-number"},[n._v("37")]),a("br"),a("span",{staticClass:"line-number"},[n._v("38")]),a("br"),a("span",{staticClass:"line-number"},[n._v("39")]),a("br"),a("span",{staticClass:"line-number"},[n._v("40")]),a("br"),a("span",{staticClass:"line-number"},[n._v("41")]),a("br"),a("span",{staticClass:"line-number"},[n._v("42")]),a("br"),a("span",{staticClass:"line-number"},[n._v("43")]),a("br"),a("span",{staticClass:"line-number"},[n._v("44")]),a("br"),a("span",{staticClass:"line-number"},[n._v("45")]),a("br")])])])}),[],!1,null,null,null);s.default=e.exports}}]);